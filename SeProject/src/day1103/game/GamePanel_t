package day1103.game;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;

import javax.swing.JPanel;

//사실상 모든~게임의 그래픽처리는  패널이 담당하게 됨!!
public class GamePanel extends JPanel{
	Thread loopThread; //게임 루프를 무한루프로 실행할 쓰레드!! 
	public static final int WIDTH=1600;
	public static final int HEIGHT=900;
	
	Hero hero;
	
	public GamePanel() {
		this.setPreferredSize(new Dimension(WIDTH, HEIGHT));
		
		createHero();//주인공 생성
		
		loopThread = new Thread() {
			public void run() {
				while(true) {
					gameLoop();
					try {
						Thread.sleep(10); // 1/1000 초
					} catch (InterruptedException e) {
						e.printStackTrace();
					}
				}
			}
		};
		loopThread.start();
	}

	public void paint(Graphics g) {
		Graphics2D g2=(Graphics2D)g; //2D에 더 적합한 그래픽스 객체로 형변환!!
		
		g2.setColor(Color.WHITE);
		g2.fillRect(0, 0, WIDTH, HEIGHT); //패널의 크기만큼 사각형이 채워진다(화면을 깨끗이 닦는 효과)
		
		render(g2);
	}
	
	public void createHero() {
		hero = new Hero(200, 200, 50, 50, 1, 0);
	}
	
	//물리량 변경
	public void tick() {
		hero.tick();
	}
	public void render(Graphics2D g2) {
		hero.render(g2);
	}
	
	//모든 게임의  tick(), render() 를 호출! 즉 게임엔진!!
	public void gameLoop() {
		tick();
		this.repaint();
		
		System.out.println("gameLoop() called...");
	}
}







